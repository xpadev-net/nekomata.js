<div class="wrapper">
	<textarea id="input" spellcheck="false"></textarea>
	<div class="right">
		<canvas id="canvas" width="1920" height="1080"></canvas>
		<textarea id="output" spellcheck="false"></textarea>
	</div>
</div>
<script src="../src/parser/parser.js"></script>
<script src="../dist/bundle.js"></script>
<script>
	const input = document.getElementById("input"),
		output = document.getElementById("output"),
			canvas = document.getElementById("canvas");
	canvas.onclick = () => {
    const AST = parser.parse(input.value);
    output.value = JSON.stringify(AST,undefined," ");
    const comments = input.value.split("\n").map((line,index)=>({
      id: index,
      vpos: 0,
      content: `/${line}`,
      date: 0,
      date_usec: 0,
      owner: true,
      premium: true,
      mail: [],
      user_id: 0,
      layer: 0
		}));
    const niwa = new Niwango(canvas,comments);
	  niwa.draw(0)
	}

</script>
<style>
	.wrapper{
		display: flex;
		flex-direction: row;
		height: 100%;
	}
	.right{
		display: flex;
		flex-direction: column;
		width: 50vw;
	}
	#canvas{
		border: solid 1px black;
	}
	textarea{
		height: 100%;
		flex: 1;
	}
</style>